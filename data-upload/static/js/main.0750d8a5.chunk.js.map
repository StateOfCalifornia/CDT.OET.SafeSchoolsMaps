{"version":3,"sources":["helpers/helpers.js","components/Header/styles.js","components/Header/Header.js","context/DataLoaderContext.js","components/FileUpload/styles.js","components/FileUpload/FileUpload.js","components/App/styles.js","components/Download/styles.js","components/Download/Download.js","components/Summary/styles.js","components/SchoolList/styles.js","components/SchoolList/SchoolList.js","components/Summary/Summary.js","components/App/AppSecured.js","images/splashBackground.jpg","components/Login/styles.js","components/Login/Login.js","components/App/App.js","reportWebVitals.js","index.js"],"names":["addSchoolFeatures","a","rows","fields","userSession","featureLayerUrl","addFeatures","authentication","url","features","map","row","attributes","forEach","field","name","alias","results","Container","styled","div","props","theme","palette","Brand_Blue_200","Branding","white","Logo","img","Avatar","ArcgisAccount","lightBlue","Header","account","user","portal","attemptLogout","src","alt","hideSwitchAccount","onRequestSignOut","DataLoaderContext","React","createContext","loading","undefined","setLoading","error","setError","data","setData","config","index","Brand_Blue_100","List","FileUpload","useContext","useState","allSchools","setAllSchools","useEffect","filter","school","isValidField","isValidValue","handleFileChanged","e","promise","Promise","resolve","reject","fileReader","FileReader","readAsArrayBuffer","target","files","onload","bufferArray","result","wb","XLSX","read","type","cellDates","dateNF","wsName","SheetNames","ws","Sheets","dataRows","utils","sheet_to_json","schoolNameFieldExcel","onerror","then","catch","console","afterUploadMessage","length","accept","onChange","style","paddingTop","ContentContainer","ContentHeader","lightestGray","ContentFooter","ModalActions","DownloadButton","Button","Download","fileUrl","href","download","onClick","log","icon","size","Row","StyledList","SchoolList","schools","schoolField","height","Math","min","overscanRowCount","rowCount","rowHeight","rowRenderer","key","isScrolling","width","Summary","addResults","errorSchools","item","idx","success","push","errorMessage","color","margin","schoolNameFieldEsri","alignItems","AppSecured","appConfig","setFields","currentStep","setCurrentStep","setResults","useMemo","UserSession","getFields","getLayer","featureServiceURL","layer","hasOwnProperty","submitData","Provider","value","sizeRatio","position","top","left","templateUrl","clear","marginRight","disabled","splashImage","LoginDialog","Modal","Content","Image","LoginButton","Login","attemptLogin","open","appElement","document","body","overlayStyle","background","fullWidth","App","loginOptions","authInfo","redirectUri","window","location","useAccountManager","accountManagerState","addAccount","logoutAccount","active","accounts","session","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","CalciteTheme","blue","darkBlue","clientId","portalUrl","popup","ReactDOM","render","StrictMode","getElementById","init"],"mappings":"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","file":"static/js/main.0750d8a5.chunk.js","sourcesContent":["import { addFeatures } from \"@esri/arcgis-rest-feature-layer\";\nimport { request } from \"@esri/arcgis-rest-request\";\n\nexport const addSchoolFeatures = async ({\n  rows,\n  fields,\n  userSession,\n  featureLayerUrl,\n}) => {\n  const results = await addFeatures({\n    authentication: userSession,\n    url: featureLayerUrl,\n    features: rows.map((row) => {\n      let attributes = {};\n      fields.forEach((field) => {\n        attributes[field.name] = row[field.alias];\n      });\n      const feature = {\n        attributes,\n      };\n      return feature;\n    }),\n  });\n\n  return results;\n};\n\n// Helper method to quickly GET a resource\n// https://esri.github.io/arcgis-rest-js/api/request/request/\nexport function get(url, params) {\n  return new Promise((resolve, reject) => {\n    request(url, { httpMethod: \"GET\", params: params })\n      .then((response) => resolve(response))\n      .catch((error) => reject(error));\n  });\n}\n","import ArcgisAccount from \"calcite-react/ArcgisAccount\";\nimport styled from \"styled-components\";\n\nconst Container = styled.div`\n  height: 60px;\n  padding: 10px 0px;\n  background: ${(props) => props.theme.palette.Brand_Blue_200};\n  box-sizing: border-box;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst Branding = styled.div`\n  display: flex;\n  align-items: center;\n  margin-right: 25px;\n  & img {\n    height: 70px;\n    margin-right: 15px;\n    background: #ffffff;\n    padding-left: 15px;\n  }\n  & h1 {\n    margin: 0;\n    font-size: 1.5em;\n    font-weight: 300;\n    color: ${(props) => props.theme.palette.white};\n  }\n`;\n\nconst Logo = styled.img`\n  background: ${(props) => props.theme.palette.Brand_Blue_200} !important;\n  height: 50px !important;\n`;\n\nconst Avatar = styled(ArcgisAccount)`\n  color: ${(props) => props.theme.palette.white};\n  height: auto !important;\n  background-color: ${(props) => props.theme.palette.lightBlue};\n`;\n\nexport { Container, Branding, Logo, Avatar };\n","import React from \"react\";\n// Component specific modules (Component-styled, etc.)\nimport { Avatar, Container, Branding, Logo } from \"./styles\";\n\nconst Header = ({ account: { user, portal }, attemptLogout }) => {\n  return (\n    <Container>\n      <Branding>\n        <Logo\n          src=\"https://california.maps.arcgis.com/sharing/rest/content/items/eabecb26ec754b849c44175495e31e66/data\"\n          alt=\"Header Logo\"\n        />\n        <h1>CA Safe Schools - Data Import</h1>\n      </Branding>\n      <Avatar\n        user={user}\n        portal={portal}\n        hideSwitchAccount={true}\n        onRequestSignOut={attemptLogout}\n      ></Avatar>\n    </Container>\n  );\n};\n\nexport default Header;\n","import React from \"react\";\n\nconst DataLoaderContext = React.createContext({\n  loading: undefined,\n  setLoading: undefined,\n  error: undefined,\n  setError: undefined,\n  data: undefined,\n  setData: undefined,\n  config: undefined,\n});\n\nexport default DataLoaderContext;\n","import styled from \"styled-components\";\nimport { List } from \"react-virtualized\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n`;\nconst Row = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding-left: 10px;\n  background-color: ${(props) =>\n    props.index % 2 ? props.theme.palette.Brand_Blue_100 : \"\"};\n`;\nconst Header = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  background-color: ${(props) => props.theme.palette.Brand_Blue_200};\n  color: #ffffff;\n`;\n\nconst StyledList = styled(List)`\n  border: 1px solid ${(props) => props.theme.palette.Brand_Blue_200};\n`;\n\nexport { Container, Header, Row, StyledList };\n","import FileUploader from \"calcite-react/FileUploader\";\nimport { useContext, useEffect, useState } from \"react\";\nimport DataLoaderContext from \"../../context/DataLoaderContext\";\nimport XLSX from \"xlsx\";\n\nimport { Container } from \"./styles\";\nimport { CalciteP } from \"calcite-react/Elements\";\nimport { CalciteH2 } from \"calcite-react/Elements/Elements-styled\";\n\nconst FileUpload = () => {\n  const { setLoading, data, setData, setError, config } = useContext(\n    DataLoaderContext\n  );\n  const [allSchools, setAllSchools] = useState([]);\n\n  useEffect(() => {\n    setData(\n      allSchools.filter(\n        (school) => school[config.isValidField] === config.isValidValue\n      )\n    );\n  }, [config, allSchools, setData]);\n\n  const handleFileChanged = async (e) => {\n    setError(null);\n    setData([]);\n    setLoading(true);\n\n    const promise = new Promise((resolve, reject) => {\n      try {\n        const fileReader = new FileReader();\n        fileReader.readAsArrayBuffer(e.target.files[0]);\n\n        fileReader.onload = (e) => {\n          const bufferArray = e.target.result;\n          const wb = XLSX.read(bufferArray, {\n            type: \"buffer\",\n            cellDates: true,\n            dateNF: \"YYYY-MM-DD\",\n          });\n          const wsName = wb.SheetNames[0];\n          const ws = wb.Sheets[wsName];\n          const data = XLSX.utils.sheet_to_json(ws);\n\n          const dataRows = data.filter(\n            (row) => row[config.schoolNameFieldExcel]\n          );\n\n          resolve(dataRows);\n        };\n\n        fileReader.onerror = (error) => {\n          reject(error);\n        };\n      } catch (error) {\n        reject(error);\n      }\n    });\n\n    promise.then((data) => {\n      setLoading(false);\n      setAllSchools(data);\n    });\n    promise.catch((error) => {\n      console.error(error);\n      setError(\"Error Processing File\");\n    });\n  };\n\n  const afterUploadMessage = `The uploaded file contains valid data for ${data.length} of the ${allSchools.length} schools\n   in the district. Click Next to submit.`;\n\n  const beforeUploadMessage = `Upload your populated Excel document. Only valid rows will be submitted.`;\n\n  return (\n    <Container>\n      <CalciteH2>Upload & Review</CalciteH2>\n      <CalciteP>{beforeUploadMessage}</CalciteP>\n      <FileUploader accept=\".xlsx,.xls\" onChange={handleFileChanged} />\n      <CalciteP style={{ paddingTop: \"10px\" }}>\n        {data.length ? afterUploadMessage : \"\"}\n      </CalciteP>\n      {/*  */}\n    </Container>\n  );\n};\n\nexport default FileUpload;\n","import styled from \"styled-components\";\nimport { ModalActions } from \"calcite-react/Modal\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  width: 80%;\n  max-width: 800px;\n  margin: 8% auto;\n  border: 2px solid #1f2574;\n  box-shadow: 0px 0px 8px 2px rgb(10 10 10 / 25%);\n`;\n\nconst ContentContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 100%;\n  padding: 36px;\n`;\n\nconst ContentHeader = styled.div`\n  width: calc(100% - 4rem);\n  background: ${(props) => props.theme.palette.lightestGray};\n  padding: 2rem;\n`;\n\nconst ContentFooter = styled(ModalActions)`\n  justify-content: space-between;\n`;\n\nexport { Container, ContentContainer, ContentHeader, ContentFooter };\n","import styled from \"styled-components\";\nimport Button from \"calcite-react/Button\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  height: 100%;\n`;\nconst DownloadButton = styled(Button)`\n  width: 200px;\n`;\n\nexport { Container, DownloadButton };\n","import React from \"react\";\nimport { Container, DownloadButton } from \"./styles\";\nimport { CalciteP, CalciteH2 } from \"calcite-react/Elements\";\n\nimport DownloadToIcon from \"calcite-ui-icons-react/DownloadToIcon\";\n\nconst Download = ({ fileUrl }) => {\n  return (\n    <Container>\n      <CalciteH2>Download Template</CalciteH2>\n      <CalciteP>\n        Download Excel template. Select your county and district, then populate\n        school data.\n      </CalciteP>\n      <DownloadButton\n        href={fileUrl}\n        download=\"CASchools_District_DataTemplate.xlsx\"\n        onClick={() => console.log(\"clicked\")}\n        icon={<DownloadToIcon size={16} />}\n      >\n        Download\n      </DownloadButton>\n    </Container>\n  );\n};\n\nexport default Download;\n","import styled from \"styled-components\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n`;\n\nexport { Container };\n","import styled from \"styled-components\";\nimport { List } from \"react-virtualized\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n`;\nconst Row = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding-left: 10px;\n  background-color: ${(props) =>\n    props.index % 2 ? props.theme.palette.lightBlue : \"\"};\n  color: ${(props) => (props.index % 2 ? props.theme.palette.white : \"\")};\n`;\nconst Header = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  background-color: ${(props) => props.theme.palette.Brand_Blue_200};\n  color: #ffffff;\n`;\n\nconst StyledList = styled(List)`\n  border: 1px solid ${(props) => props.theme.palette.Brand_Blue_200};\n`;\n\nexport { Container, Header, Row, StyledList };\n","import { Container, Row, StyledList } from \"./styles\";\n\nconst SchoolList = ({ schools, schoolField }) => {\n  const renderRow = ({ index, isScrolling, key, style }) => {\n    const row = schools[index];\n\n    return (\n      <Row style={style} key={key} index={index}>\n        {row[schoolField]}\n      </Row>\n    );\n  };\n\n  return (\n    <Container>\n      {schools.length ? (\n        <StyledList\n          height={Math.min(200, schools.length * 40)}\n          overscanRowCount={10}\n          rowCount={schools.length}\n          rowHeight={40}\n          rowRenderer={renderRow}\n          width={600}\n        />\n      ) : (\n        \"\"\n      )}\n    </Container>\n  );\n};\n\nexport default SchoolList;\n","import { useContext } from \"react\";\nimport DataLoaderContext from \"../../context/DataLoaderContext\";\n\nimport { Container } from \"./styles\";\nimport { CalciteP, CalciteH3 } from \"calcite-react/Elements\";\nimport CheckCircleIcon from \"calcite-ui-icons-react/CheckCircleIcon\";\nimport XCircleIcon from \"calcite-ui-icons-react/XCircleIcon\";\n\nimport SchoolList from \"../SchoolList\";\n\nconst Summary = ({ results }) => {\n  const { config, data } = useContext(DataLoaderContext);\n  const { addResults } = results;\n  let errorSchools = [];\n  addResults.forEach((item, idx) => {\n    if (!item.success) {\n      errorSchools.push(data[idx]);\n    }\n  });\n\n  const errorMessage = errorSchools.length\n    ? `There was an error submitting ${errorSchools.length} of ${addResults.length} schools. The below schools were not added.`\n    : null;\n\n  if (errorMessage) {\n    return (\n      <Container>\n        <XCircleIcon size={100} color=\"red\" style={{ margin: \"auto\" }} />\n        <CalciteH3>Error</CalciteH3>\n        <CalciteP>{errorMessage}</CalciteP>\n        <SchoolList\n          schools={errorSchools}\n          schoolField={config.schoolNameFieldEsri}\n        />\n      </Container>\n    );\n  }\n\n  return (\n    <Container style={{ alignItems: \"center\" }}>\n      <CheckCircleIcon size={100} color=\"green\" style={{ margin: \"auto\" }} />\n      <CalciteH3>{`Success! All ${addResults.length} schools updated.`}</CalciteH3>\n    </Container>\n  );\n};\n\nexport default Summary;\n","import React, { useEffect, useMemo, useState } from \"react\";\nimport { getLayer } from \"@esri/arcgis-rest-feature-layer\";\nimport { UserSession } from \"@esri/arcgis-rest-auth\";\n\nimport { addSchoolFeatures } from \"../../helpers/helpers\";\n\nimport Button from \"calcite-react/Button\";\nimport Loader from \"calcite-react/Loader\";\nimport Stepper, {\n  Step,\n  StepTitle,\n  StepDescription,\n} from \"calcite-react/Stepper\";\n\nimport Header from \"../Header\";\nimport FileUpload from \"../FileUpload\";\nimport {\n  Container,\n  ContentContainer,\n  ContentFooter,\n  ContentHeader,\n} from \"./styles\";\nimport DataLoaderContext from \"../../context/DataLoaderContext\";\nimport Download from \"../Download\";\nimport Summary from \"../Summary\";\n\nconst AppSecured = ({ account, appConfig, attemptLogout }) => {\n  const [loading, setLoading] = React.useState(false);\n  const [error, setError] = React.useState(null);\n  const [data, setData] = useState([]);\n  const [fields, setFields] = useState([]);\n  const [currentStep, setCurrentStep] = useState(1);\n  const [results, setResults] = useState(null);\n\n  const userSession = useMemo(() => new UserSession(account), [account]);\n\n  useEffect(() => {\n    const getFields = async () => {\n      try {\n        const layer = await getLayer({\n          authentication: userSession,\n          url: appConfig.featureServiceURL,\n        });\n        if (layer && layer.fields) {\n          setFields(\n            layer.fields.filter((field) => data[0].hasOwnProperty(field.alias))\n          );\n        }\n      } catch (error) {\n        console.error(error);\n        setError(\"Error Saving Data. (Fields)\");\n      }\n    };\n    if (data.length) {\n      getFields();\n    }\n  }, [data, userSession, appConfig]);\n\n  const submitData = async () => {\n    setLoading(true);\n    const results = await addSchoolFeatures({\n      rows: data,\n      fields,\n      userSession,\n      featureLayerUrl: appConfig.featureServiceURL,\n    });\n    setResults(results);\n    setCurrentStep(currentStep + 1);\n    setLoading(false);\n  };\n\n  const nextLabels = [\"Next\", \"Submit\", \"Restart\"];\n\n  return (\n    <DataLoaderContext.Provider\n      value={{\n        loading,\n        setLoading,\n        error,\n        setError,\n        data,\n        setData,\n        config: appConfig,\n      }}\n    >\n      <div>\n        <Header account={account} attemptLogout={attemptLogout} />\n        <Container>\n          <ContentHeader>\n            <Stepper currentStep={currentStep}>\n              <Step>\n                <StepTitle>Download</StepTitle>\n                <StepDescription>\n                  Download the Excel template to report school data.\n                </StepDescription>\n              </Step>\n              <Step error={error && currentStep === 2}>\n                <StepTitle>Upload</StepTitle>\n                <StepDescription>\n                  {error && currentStep === 1\n                    ? error\n                    : \"Upload the excel template populated with your schools information.\"}\n                </StepDescription>\n              </Step>\n              <Step>\n                <StepTitle>Summary</StepTitle>\n                <StepDescription>\n                  Summary of your submitted school data.\n                </StepDescription>\n              </Step>\n            </Stepper>\n          </ContentHeader>\n          <ContentContainer>\n            {loading && (\n              <Loader\n                key=\"uploadLoader\"\n                sizeRatio={2}\n                style={{ position: \"absolute\", top: \"30%\", left: \"50%\" }}\n              />\n            )}\n            {currentStep === 1 && <Download fileUrl={appConfig.templateUrl} />}\n            {currentStep === 2 && <FileUpload />}\n            {currentStep === 3 && <Summary results={results} />}\n          </ContentContainer>\n          <ContentFooter>\n            <div>\n              {currentStep === 2 ? (\n                <Button\n                  clear\n                  onClick={() => {\n                    setCurrentStep(currentStep - 1);\n                  }}\n                  style={{ marginRight: \".5rem\" }}\n                >\n                  Previous\n                </Button>\n              ) : (\n                \"\"\n              )}\n              <Button\n                disabled={currentStep === 2 && (!data || !data.length)}\n                onClick={() => {\n                  if (currentStep === 1) {\n                    setCurrentStep(currentStep + 1);\n                  } else if (currentStep === 2) {\n                    submitData();\n                  } else {\n                    setData([]);\n                    setCurrentStep(1);\n                  }\n                }}\n              >\n                {nextLabels[currentStep - 1]}\n              </Button>\n            </div>\n          </ContentFooter>\n        </Container>\n      </div>\n    </DataLoaderContext.Provider>\n  );\n};\n\nexport default AppSecured;\n","export default __webpack_public_path__ + \"static/media/splashBackground.5204fcdc.jpg\";","import styled from \"styled-components\";\n\nimport Modal from \"calcite-react/Modal\";\nimport Button from \"calcite-react/Button\";\n\nimport splashImage from \"../../images/splashBackground.jpg\";\n\nconst Container = styled.div`\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n  background: url(${(props) => (props.error ? \"\" : splashImage)}) center/cover\n    no-repeat;\n`;\n\nconst LoginDialog = styled(Modal)`\n  width: 350px;\n`;\n\nconst Content = styled.div`\n  text-align: center;\n`;\n\nconst Image = styled.img`\n  width: 177px;\n`;\n\nconst LoginButton = styled(Button)`\n  margin-top: 1rem;\n  background-color: #1b449d;\n`;\n\nexport { Container, LoginDialog, Content, Image, LoginButton };\n","// Framework and third-party non-ui\nimport React from \"react\";\nimport { CalciteP } from \"calcite-react/Elements\";\n\n// Styles\nimport {\n  Container,\n  LoginButton,\n  Content,\n  Image,\n  LoginDialog,\n} from \"./styles.js\";\n\nconst Login = ({ attemptLogin }) => {\n  return (\n    <Container>\n      <LoginDialog\n        open={true}\n        appElement={document.body}\n        overlayStyle={{ background: \"unset\" }}\n      >\n        <Content>\n          <Image\n            src=\"https://california.maps.arcgis.com/sharing/rest/content/items/eabecb26ec754b849c44175495e31e66/data\"\n            alt=\"App Logo\"\n          />\n          <CalciteP>Login to upload school data.</CalciteP>\n          <LoginButton fullWidth={true} onClick={attemptLogin}>\n            Proceed to Login\n          </LoginButton>\n        </Content>\n      </LoginDialog>\n    </Container>\n  );\n};\n\nexport default Login;\n","import { useAccountManager } from \"calcite-react/ArcgisAccount\";\nimport { UserSession } from \"@esri/arcgis-rest-auth\";\n\nimport AppSecured from \"./AppSecured\";\nimport Login from \"../Login\";\n\nconst App = ({ config }) => {\n  const loginOptions = {\n    ...config.authInfo,\n    ...{ redirectUri: window.location.href },\n  };\n  const { accountManagerState, addAccount, logoutAccount } = useAccountManager(\n    loginOptions\n  );\n\n  const { active, accounts } = accountManagerState;\n  const attemptLogin = () => {\n    addAccount(loginOptions);\n  };\n  const attemptLogout = () => {\n    logoutAccount(accounts[active]);\n  };\n  console.log(accountManagerState);\n\n  return active && accounts[active] && accounts[active].session ? (\n    <AppSecured\n      appConfig={config}\n      account={accounts[active]}\n      userSession={new UserSession(accounts[active].session)}\n      attemptLogout={attemptLogout}\n    />\n  ) : (\n    <Login attemptLogin={attemptLogin} />\n  );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./components/App\";\nimport reportWebVitals from \"./reportWebVitals\";\n// style\nimport \"./index.css\";\nimport CalciteThemeProvider, {\n  CalciteTheme,\n} from \"calcite-react/CalciteThemeProvider\";\n// import { get } from \"./helpers/helpers\";\n\nlet theme = CalciteTheme;\n\ntheme.palette.Brand_Blue_200 = \"#1f2574\";\ntheme.palette.blue = \"#1f2574\";\ntheme.palette.lightBlue = \"#5258A7\";\ntheme.palette.darkBlue = \"#5258A7\";\nconsole.log(theme);\n\nconst init = async () => {\n  // const config = await get(`${process.env.PUBLIC_URL}/config.json`);\n  const config = {\n    featureServiceURL:\n      \"https://services3.arcgis.com/uknczv4rpevve42E/ArcGIS/rest/services/TrailerBillDistricts/FeatureServer/0\",\n    templateUrl:\n      \"https://california.maps.arcgis.com/sharing/rest/content/items/2d458e6ee04b494a9747271ad8ffcc08/data\",\n    isValidField: \"IsValid\",\n    isValidValue: \"Valid\",\n    schoolNameFieldEsri: \"school_name\",\n    schoolNameFieldExcel: \"School\",\n    authInfo: {\n      clientId: \"KZryzIWRkPmHUGlJ\",\n      portalUrl: \"https://california-hub.maps.arcgis.com/sharing\",\n      popup: false,\n    },\n  };\n\n  ReactDOM.render(\n    <React.StrictMode>\n      <CalciteThemeProvider>\n        <App config={config} />\n      </CalciteThemeProvider>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n  );\n};\n\ninit();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}