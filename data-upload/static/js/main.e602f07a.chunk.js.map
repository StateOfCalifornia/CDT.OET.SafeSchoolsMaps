{"version":3,"sources":["helpers/helpers.js","components/Header/styles.js","components/Header/Header.js","context/DataLoaderContext.js","components/FileUpload/styles.js","components/Download/styles.js","components/FileUpload/FileUpload.js","components/App/styles.js","components/Download/Download.js","components/Summary/styles.js","components/SchoolList/styles.js","components/SchoolList/SchoolList.js","components/Summary/Summary.js","components/App/AppSecured.js","images/splashBackground.jpg","components/Login/styles.js","components/Login/Login.js","components/App/App.js","reportWebVitals.js","index.js"],"names":["addSchoolFeatures","a","rows","fields","userSession","featureLayerUrl","addFeatures","authentication","url","features","map","row","attributes","forEach","field","name","alias","results","Container","styled","div","props","theme","palette","Brand_Blue_200","Branding","white","Logo","img","Avatar","ArcgisAccount","lightBlue","Header","account","user","portal","attemptLogout","isDev","src","alt","hideSwitchAccount","onRequestSignOut","DataLoaderContext","React","createContext","loading","undefined","setLoading","error","setError","data","setData","versionInfo","setVersionInfo","config","DownloadContainer","StyledAlert","Alert","index","Brand_Blue_100","List","DownloadButton","Button","FileUpload","onVersionError","useContext","useState","allSchools","setAllSchools","showVersionError","setShowVersionError","useEffect","filter","school","isValidField","isValidValue","handleFileChanged","e","promise","Promise","resolve","reject","fileReader","FileReader","target","files","length","readAsArrayBuffer","onload","bufferArray","result","wb","XLSX","read","type","cellDates","dateNF","versionSheet","Sheets","version","sheet","uploadVersionData","utils","sheet_to_json","versionKey","major","versionError","wsName","SheetNames","ws","dataRows","schoolNameFieldExcel","onerror","then","catch","console","afterUploadMessage","accept","onChange","style","paddingTop","icon","size","href","env","templateUrl","download","ContentContainer","ContentHeader","lightestGray","ContentFooter","ModalActions","Download","getVersionData","fetch","token","response","arrayBuffer","buffer","hasOwnProperty","message","moment","date","format","Row","StyledList","SchoolList","schools","schoolField","height","Math","min","overscanRowCount","rowCount","rowHeight","rowRenderer","key","isScrolling","width","Summary","addResults","errorSchools","item","idx","success","push","errorMessage","color","margin","schoolNameFieldEsri","alignItems","AppSecured","appConfig","setFields","currentStep","setCurrentStep","setResults","useMemo","UserSession","getFields","getLayer","featureServiceURL","layer","submitData","Provider","value","sizeRatio","position","top","left","clear","onClick","marginRight","disabled","Boolean","splashImage","LoginDialog","Modal","Content","Image","LoginButton","Login","attemptLogin","open","appElement","document","body","overlayStyle","background","fullWidth","App","loginOptions","authInfo","redirectUri","window","location","useAccountManager","accountManagerState","addAccount","logoutAccount","active","accounts","hasAccess","setHasAccess","testAccess","session","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","CalciteTheme","blue","darkBlue","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e602f07a.chunk.js","sourcesContent":["import { addFeatures } from \"@esri/arcgis-rest-feature-layer\";\nimport { request } from \"@esri/arcgis-rest-request\";\n\nexport const addSchoolFeatures = async ({\n  rows,\n  fields,\n  userSession,\n  featureLayerUrl,\n}) => {\n  const results = await addFeatures({\n    authentication: userSession,\n    url: featureLayerUrl,\n    features: rows.map((row) => {\n      let attributes = {};\n      fields.forEach((field) => {\n        attributes[field.name] = row[field.alias];\n      });\n      const feature = {\n        attributes,\n      };\n      return feature;\n    }),\n  });\n\n  return results;\n};\n\n// Helper method to quickly GET a resource\n// https://esri.github.io/arcgis-rest-js/api/request/request/\nexport function get(url, params) {\n  return new Promise((resolve, reject) => {\n    request(url, { httpMethod: \"GET\", params: params })\n      .then((response) => resolve(response))\n      .catch((error) => reject(error));\n  });\n}\n","import ArcgisAccount from \"calcite-react/ArcgisAccount\";\nimport styled from \"styled-components\";\n\nconst Container = styled.div`\n  height: 60px;\n  padding: 10px 0px;\n  background: ${(props) => props.theme.palette.Brand_Blue_200};\n  box-sizing: border-box;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst Branding = styled.div`\n  display: flex;\n  align-items: center;\n  margin-right: 25px;\n  & img {\n    height: 70px;\n    margin-right: 15px;\n    background: #ffffff;\n    padding-left: 15px;\n  }\n  & h1 {\n    margin: 0;\n    font-size: 1.5em;\n    font-weight: 300;\n    color: ${(props) => props.theme.palette.white};\n  }\n`;\n\nconst Logo = styled.img`\n  background: ${(props) => props.theme.palette.Brand_Blue_200} !important;\n  height: 50px !important;\n`;\n\nconst Avatar = styled(ArcgisAccount)`\n  color: ${(props) => props.theme.palette.white};\n  height: auto !important;\n  background-color: ${(props) => props.theme.palette.lightBlue};\n`;\n\nexport { Container, Branding, Logo, Avatar };\n","import React from \"react\";\n// Component specific modules (Component-styled, etc.)\nimport { Avatar, Container, Branding, Logo } from \"./styles\";\n\nconst Header = ({ account: { user, portal }, attemptLogout, isDev }) => {\n  return (\n    <Container>\n      <Branding>\n        <Logo\n          src=\"https://california.maps.arcgis.com/sharing/rest/content/items/eabecb26ec754b849c44175495e31e66/data\"\n          alt=\"Header Logo\"\n        />\n        <h1>{`CA Safe Schools - Data Import${isDev ? \" DEVELOPMENT\" : \"\"}`}</h1>\n      </Branding>\n      <Avatar\n        user={user}\n        portal={portal}\n        hideSwitchAccount={true}\n        onRequestSignOut={attemptLogout}\n      ></Avatar>\n    </Container>\n  );\n};\n\nexport default Header;\n","import React from \"react\";\n\nconst DataLoaderContext = React.createContext({\n  loading: undefined,\n  setLoading: undefined,\n  error: undefined,\n  setError: undefined,\n  data: undefined,\n  setData: undefined,\n  versionInfo: undefined,\n  setVersionInfo: undefined,\n  config: undefined,\n});\n\nexport default DataLoaderContext;\n","import styled from \"styled-components\";\nimport { List } from \"react-virtualized\";\nimport Alert from \"calcite-react/Alert\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n`;\nconst DownloadContainer = styled.div`\n  margin-top: 15px;\n`;\n\nconst StyledAlert = styled(Alert)`\n  border: 1px solid ${(props) => props.theme.palette.Brand_Blue_200};\n  max-width: unset;\n  box-shadow: unset;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding-left: 10px;\n  background-color: ${(props) =>\n    props.index % 2 ? props.theme.palette.Brand_Blue_100 : \"\"};\n`;\nconst Header = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  background-color: ${(props) => props.theme.palette.Brand_Blue_200};\n  color: #ffffff;\n`;\n\nconst StyledList = styled(List)`\n  border: 1px solid ${(props) => props.theme.palette.Brand_Blue_200};\n`;\n\nexport { Container, DownloadContainer, StyledAlert, Header, Row, StyledList };\n","import styled from \"styled-components\";\nimport Button from \"calcite-react/Button\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  height: 100%;\n`;\nconst DownloadButton = styled(Button)`\n  width: 200px;\n`;\n\nexport { Container, DownloadButton };\n","import { useContext, useEffect, useState } from \"react\";\nimport DataLoaderContext from \"../../context/DataLoaderContext\";\nimport XLSX from \"xlsx\";\n\nimport { Container, DownloadContainer, StyledAlert } from \"./styles\";\nimport { AlertTitle, AlertMessage } from \"calcite-react/Alert\";\nimport { CalciteP } from \"calcite-react/Elements\";\nimport { CalciteH2 } from \"calcite-react/Elements/Elements-styled\";\nimport ExclamationMarkTriangleIcon from \"calcite-ui-icons-react/ExclamationMarkTriangleIcon\";\nimport DownloadToIcon from \"calcite-ui-icons-react/DownloadToIcon\";\n\nimport FileUploader from \"calcite-react/FileUploader\";\nimport { DownloadButton } from \"../Download/styles\";\n\nconst FileUpload = ({ onVersionError }) => {\n  const {\n    setLoading,\n    data,\n    versionInfo,\n    setData,\n    setError,\n    config,\n  } = useContext(DataLoaderContext);\n  const [allSchools, setAllSchools] = useState([]);\n  const [showVersionError, setShowVersionError] = useState(false);\n\n  useEffect(() => {\n    setData(\n      allSchools.filter(\n        (school) => school[config.isValidField] === config.isValidValue\n      )\n    );\n  }, [config, allSchools, setData]);\n\n  const handleFileChanged = async (e) => {\n    setError(null);\n    setData([]);\n    setLoading(true);\n    setShowVersionError(false);\n\n    const promise = new Promise((resolve, reject) => {\n      try {\n        const fileReader = new FileReader();\n        if (!e.target.files || !e.target.files.length) {\n          resolve(null);\n        }\n        fileReader.readAsArrayBuffer(e.target.files[0]);\n\n        fileReader.onload = (e) => {\n          const bufferArray = e.target.result;\n          const wb = XLSX.read(bufferArray, {\n            type: \"buffer\",\n            cellDates: true,\n            dateNF: \"YYYY-MM-DD\",\n          });\n\n          try {\n            const versionSheet = wb.Sheets[config.version.sheet];\n            const versionRows = XLSX.utils.sheet_to_json(versionSheet);\n            const uploadVersionData = versionRows[0];\n            const versionKey = config.version.major;\n            if (versionInfo[versionKey] !== uploadVersionData[versionKey]) {\n              resolve({ versionError: true });\n            }\n          } catch (error) {\n            resolve({ versionError: true });\n          }\n\n          const wsName = wb.SheetNames[0];\n          const ws = wb.Sheets[wsName];\n          const data = XLSX.utils.sheet_to_json(ws);\n\n          const dataRows = data.filter(\n            (row) => row[config.schoolNameFieldExcel]\n          );\n\n          resolve(dataRows);\n        };\n\n        fileReader.onerror = (error) => {\n          reject(error);\n        };\n      } catch (error) {\n        reject(error);\n      }\n    });\n\n    promise.then((data) => {\n      setLoading(false);\n      if (data) {\n        if (data.versionError) {\n          setShowVersionError(true);\n        } else {\n          setAllSchools(data);\n        }\n      } else {\n        setError(\"Error Processing File\");\n      }\n    });\n    promise.catch((error) => {\n      console.error(error);\n      setError(\"Error Processing File\");\n    });\n  };\n\n  const afterUploadMessage = `The uploaded file contains valid data for ${data.length} of the ${allSchools.length} schools\n   in the district. Click Next to submit.`;\n\n  const beforeUploadMessage = `Upload your populated Excel document. Only valid rows will be submitted.`;\n\n  return (\n    <Container>\n      <CalciteH2>Upload & Review</CalciteH2>\n      <CalciteP>{beforeUploadMessage}</CalciteP>\n      <FileUploader accept=\".xlsx,.xls\" onChange={handleFileChanged} />\n      <CalciteP style={{ paddingTop: \"10px\" }}>\n        {data.length ? afterUploadMessage : \"\"}\n      </CalciteP>\n      {showVersionError ? (\n        <StyledAlert icon={<ExclamationMarkTriangleIcon size={24} />}>\n          <AlertTitle>Invalid Excel File</AlertTitle>\n          <AlertMessage>\n            The file uploaded does not match the current version of the\n            template. Please download the latest, populate, and upload again.\n          </AlertMessage>\n          <DownloadContainer>\n            <DownloadButton\n              href={config[config.env].templateUrl}\n              download=\"CASchools_District_DataTemplate.xlsx\"\n              icon={<DownloadToIcon size={16} />}\n            >\n              Download\n            </DownloadButton>\n          </DownloadContainer>\n        </StyledAlert>\n      ) : (\n        \"\"\n      )}\n    </Container>\n  );\n};\n\nexport default FileUpload;\n","import styled from \"styled-components\";\nimport { ModalActions } from \"calcite-react/Modal\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  width: 80%;\n  max-width: 800px;\n  margin: 8% auto;\n  border: 2px solid #1f2574;\n  box-shadow: 0px 0px 8px 2px rgb(10 10 10 / 25%);\n`;\n\nconst ContentContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 100%;\n  padding: 36px;\n`;\n\nconst ContentHeader = styled.div`\n  width: calc(100% - 4rem);\n  background: ${(props) => props.theme.palette.lightestGray};\n  padding: 2rem;\n`;\n\nconst ContentFooter = styled(ModalActions)`\n  justify-content: space-between;\n`;\n\nexport { Container, ContentContainer, ContentHeader, ContentFooter };\n","import React, { useContext, useEffect } from \"react\";\nimport { Container, DownloadButton } from \"./styles\";\nimport { CalciteP, CalciteH2 } from \"calcite-react/Elements\";\n\nimport DownloadToIcon from \"calcite-ui-icons-react/DownloadToIcon\";\n\nimport XLSX from \"xlsx\";\nimport moment from \"moment\";\nimport DataLoaderContext from \"../../context/DataLoaderContext\";\n\nconst Download = ({ userSession }) => {\n  const {\n    setVersionInfo,\n    versionInfo,\n    setLoading,\n    setError,\n    config,\n  } = useContext(DataLoaderContext);\n\n  useEffect(() => {\n    const getVersionData = async () => {\n      try {\n        const response = await fetch(\n          `${config[config.env].templateUrl}?token=${userSession.token}`\n        );\n        const buffer = await response.arrayBuffer();\n\n        const wb = XLSX.read(buffer, {\n          type: \"buffer\",\n          cellDates: true,\n          dateNF: \"YYYY-MM-DD\",\n        });\n        const wsName = config.version.sheet;\n        if (wb.Sheets.hasOwnProperty(wsName)) {\n          const ws = wb.Sheets[wsName];\n          const rows = XLSX.utils.sheet_to_json(ws);\n          setVersionInfo(rows[0]);\n        } else {\n          setError(`Sheet ${wsName} not found in workbook`);\n        }\n        setLoading(false);\n      } catch (err) {\n        setError(\"Unable to verify Template Version\");\n        setLoading(false);\n      }\n    };\n\n    if (!versionInfo) {\n      setLoading(true);\n      getVersionData();\n    }\n  }, [setVersionInfo, config, setError, setLoading, userSession, versionInfo]);\n  return versionInfo ? (\n    <Container>\n      <CalciteH2>Download Template</CalciteH2>\n      <CalciteP>\n        Download Excel template. Select your county and district, then populate\n        school data.\n      </CalciteP>\n      {versionInfo[config.version.message] ? (\n        <CalciteP>{versionInfo[config.version.message]}</CalciteP>\n      ) : (\n        \"\"\n      )}\n      <CalciteP>{`Last Updated: ${moment(\n        versionInfo[config.version.date]\n      ).format(\"LL\")}`}</CalciteP>\n      <DownloadButton\n        href={config[config.env].templateUrl}\n        download=\"CASchools_District_DataTemplate.xlsx\"\n        icon={<DownloadToIcon size={16} />}\n      >\n        Download\n      </DownloadButton>\n    </Container>\n  ) : (\n    \"\"\n  );\n};\n\nexport default Download;\n","import styled from \"styled-components\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n`;\n\nexport { Container };\n","import styled from \"styled-components\";\nimport { List } from \"react-virtualized\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n`;\nconst Row = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding-left: 10px;\n  background-color: ${(props) =>\n    props.index % 2 ? props.theme.palette.lightBlue : \"\"};\n  color: ${(props) => (props.index % 2 ? props.theme.palette.white : \"\")};\n`;\nconst Header = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  background-color: ${(props) => props.theme.palette.Brand_Blue_200};\n  color: #ffffff;\n`;\n\nconst StyledList = styled(List)`\n  border: 1px solid ${(props) => props.theme.palette.Brand_Blue_200};\n`;\n\nexport { Container, Header, Row, StyledList };\n","import { Container, Row, StyledList } from \"./styles\";\n\nconst SchoolList = ({ schools, schoolField }) => {\n  const renderRow = ({ index, isScrolling, key, style }) => {\n    const row = schools[index];\n\n    return (\n      <Row style={style} key={key} index={index}>\n        {row[schoolField]}\n      </Row>\n    );\n  };\n\n  return (\n    <Container>\n      {schools.length ? (\n        <StyledList\n          height={Math.min(200, schools.length * 40)}\n          overscanRowCount={10}\n          rowCount={schools.length}\n          rowHeight={40}\n          rowRenderer={renderRow}\n          width={600}\n        />\n      ) : (\n        \"\"\n      )}\n    </Container>\n  );\n};\n\nexport default SchoolList;\n","import { useContext } from \"react\";\nimport DataLoaderContext from \"../../context/DataLoaderContext\";\n\nimport { Container } from \"./styles\";\nimport { CalciteP, CalciteH3 } from \"calcite-react/Elements\";\nimport CheckCircleIcon from \"calcite-ui-icons-react/CheckCircleIcon\";\nimport XCircleIcon from \"calcite-ui-icons-react/XCircleIcon\";\n\nimport SchoolList from \"../SchoolList\";\n\nconst Summary = ({ results }) => {\n  const { config, data } = useContext(DataLoaderContext);\n  const { addResults } = results;\n  let errorSchools = [];\n  addResults.forEach((item, idx) => {\n    if (!item.success) {\n      errorSchools.push(data[idx]);\n    }\n  });\n\n  const errorMessage = errorSchools.length\n    ? `There was an error submitting ${errorSchools.length} of ${addResults.length} schools. The below schools were not added.`\n    : null;\n\n  if (errorMessage) {\n    return (\n      <Container>\n        <XCircleIcon size={100} color=\"red\" style={{ margin: \"auto\" }} />\n        <CalciteH3>Error</CalciteH3>\n        <CalciteP>{errorMessage}</CalciteP>\n        <SchoolList\n          schools={errorSchools}\n          schoolField={config.schoolNameFieldEsri}\n        />\n      </Container>\n    );\n  }\n\n  return (\n    <Container style={{ alignItems: \"center\" }}>\n      <CheckCircleIcon size={100} color=\"green\" style={{ margin: \"auto\" }} />\n      <CalciteH3>{`Success! All ${addResults.length} schools updated.`}</CalciteH3>\n    </Container>\n  );\n};\n\nexport default Summary;\n","import React, { useEffect, useMemo, useState } from \"react\";\nimport { getLayer } from \"@esri/arcgis-rest-feature-layer\";\nimport { UserSession } from \"@esri/arcgis-rest-auth\";\n\nimport { addSchoolFeatures } from \"../../helpers/helpers\";\n\nimport Button from \"calcite-react/Button\";\nimport Loader from \"calcite-react/Loader\";\nimport Stepper, {\n  Step,\n  StepTitle,\n  StepDescription,\n} from \"calcite-react/Stepper\";\n\nimport Header from \"../Header\";\nimport FileUpload from \"../FileUpload\";\nimport {\n  Container,\n  ContentContainer,\n  ContentFooter,\n  ContentHeader,\n} from \"./styles\";\nimport DataLoaderContext from \"../../context/DataLoaderContext\";\nimport Download from \"../Download\";\nimport Summary from \"../Summary\";\n\nconst AppSecured = ({ account, appConfig, attemptLogout }) => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [data, setData] = useState([]);\n  const [versionInfo, setVersionInfo] = useState(null);\n  const [fields, setFields] = useState([]);\n  const [currentStep, setCurrentStep] = useState(1);\n  const [results, setResults] = useState(null);\n\n  const userSession = useMemo(() => new UserSession(account), [account]);\n\n  useEffect(() => {\n    const getFields = async () => {\n      try {\n        const layer = await getLayer({\n          authentication: userSession,\n          url: appConfig[appConfig.env].featureServiceURL,\n        });\n        if (layer && layer.fields) {\n          setFields(\n            layer.fields.filter((field) => data[0].hasOwnProperty(field.alias))\n          );\n        }\n      } catch (error) {\n        console.error(error);\n        setError(\"Error Saving Data. (Fields)\");\n      }\n    };\n    if (data.length) {\n      getFields();\n    }\n  }, [data, userSession, appConfig]);\n\n  const submitData = async () => {\n    setLoading(true);\n    const results = await addSchoolFeatures({\n      rows: data,\n      fields,\n      userSession,\n      featureLayerUrl: appConfig[appConfig.env].featureServiceURL,\n    });\n    setResults(results);\n    setCurrentStep(currentStep + 1);\n    setLoading(false);\n  };\n\n  const nextLabels = [\"Next\", \"Submit\", \"Restart\"];\n\n  return (\n    <DataLoaderContext.Provider\n      value={{\n        loading,\n        setLoading,\n        error,\n        setError,\n        data,\n        setData,\n        versionInfo,\n        setVersionInfo,\n        config: appConfig,\n      }}\n    >\n      <div>\n        <Header\n          account={account}\n          attemptLogout={attemptLogout}\n          isDev={appConfig.env === \"dev\"}\n        />\n        <Container>\n          <ContentHeader>\n            <Stepper currentStep={currentStep}>\n              <Step error={error && currentStep === 1}>\n                <StepTitle>Download</StepTitle>\n                <StepDescription>\n                  {error && currentStep === 1\n                    ? error\n                    : \"Download the Excel template to report school data.\"}\n                </StepDescription>\n              </Step>\n              <Step error={error && currentStep === 2}>\n                <StepTitle>Upload</StepTitle>\n                <StepDescription>\n                  {error && currentStep === 2\n                    ? error\n                    : \"Upload the excel template populated with your schools information.\"}\n                </StepDescription>\n              </Step>\n              <Step>\n                <StepTitle>Summary</StepTitle>\n                <StepDescription>\n                  Summary of your submitted school data.\n                </StepDescription>\n              </Step>\n            </Stepper>\n          </ContentHeader>\n          <ContentContainer>\n            {loading && (\n              <Loader\n                key=\"uploadLoader\"\n                sizeRatio={2}\n                style={{ position: \"absolute\", top: \"30%\", left: \"50%\" }}\n              />\n            )}\n            {currentStep === 1 && (\n              <Download\n                versionInfo={appConfig.version}\n                userSession={userSession}\n              />\n            )}\n            {currentStep === 2 && <FileUpload />}\n            {currentStep === 3 && <Summary results={results} />}\n          </ContentContainer>\n          <ContentFooter>\n            <div>\n              {currentStep === 2 ? (\n                <Button\n                  clear\n                  onClick={() => {\n                    setCurrentStep(currentStep - 1);\n                    setError(null);\n                  }}\n                  style={{ marginRight: \".5rem\" }}\n                >\n                  Previous\n                </Button>\n              ) : (\n                \"\"\n              )}\n              <Button\n                disabled={\n                  (currentStep === 2 && (!data || !data.length)) ||\n                  Boolean(error)\n                }\n                onClick={() => {\n                  if (currentStep === 1) {\n                    setCurrentStep(currentStep + 1);\n                  } else if (currentStep === 2) {\n                    submitData();\n                  } else {\n                    setData([]);\n                    setCurrentStep(1);\n                  }\n                }}\n              >\n                {nextLabels[currentStep - 1]}\n              </Button>\n            </div>\n          </ContentFooter>\n        </Container>\n      </div>\n    </DataLoaderContext.Provider>\n  );\n};\n\nexport default AppSecured;\n","export default __webpack_public_path__ + \"static/media/splashBackground.5204fcdc.jpg\";","import styled from \"styled-components\";\n\nimport Modal from \"calcite-react/Modal\";\nimport Button from \"calcite-react/Button\";\n\nimport splashImage from \"../../images/splashBackground.jpg\";\n\nconst Container = styled.div`\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n  background: url(${(props) => (props.error ? \"\" : splashImage)}) center/cover\n    no-repeat;\n`;\n\nconst LoginDialog = styled(Modal)`\n  width: 350px;\n`;\n\nconst Content = styled.div`\n  text-align: center;\n`;\n\nconst Image = styled.img`\n  width: 177px;\n`;\n\nconst LoginButton = styled(Button)`\n  margin-top: 1rem;\n  background-color: #1b449d;\n`;\n\nexport { Container, LoginDialog, Content, Image, LoginButton };\n","// Framework and third-party non-ui\nimport React from \"react\";\nimport { CalciteP } from \"calcite-react/Elements\";\n\n// Styles\nimport {\n  Container,\n  LoginButton,\n  Content,\n  Image,\n  LoginDialog,\n} from \"./styles.js\";\n\nconst Login = ({ attemptLogin }) => {\n  return (\n    <Container>\n      <LoginDialog\n        open={true}\n        appElement={document.body}\n        overlayStyle={{ background: \"unset\" }}\n      >\n        <Content>\n          <Image\n            src=\"https://california.maps.arcgis.com/sharing/rest/content/items/eabecb26ec754b849c44175495e31e66/data\"\n            alt=\"App Logo\"\n          />\n          <CalciteP>Login to upload school data.</CalciteP>\n          <LoginButton fullWidth={true} onClick={attemptLogin}>\n            Proceed to Login\n          </LoginButton>\n        </Content>\n      </LoginDialog>\n    </Container>\n  );\n};\n\nexport default Login;\n","import { useAccountManager } from \"calcite-react/ArcgisAccount\";\nimport { UserSession } from \"@esri/arcgis-rest-auth\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { getLayer } from \"@esri/arcgis-rest-feature-layer\";\n\nimport AppSecured from \"./AppSecured\";\nimport Login from \"../Login\";\n\nconst App = ({ config }) => {\n  const loginOptions = {\n    ...config.authInfo,\n    ...{ redirectUri: window.location.href },\n  };\n  const { accountManagerState, addAccount, logoutAccount } = useAccountManager(\n    loginOptions\n  );\n  const { active, accounts } = accountManagerState;\n\n  const [hasAccess, setHasAccess] = useState(null);\n\n  useEffect(() => {\n    const testAccess = async () => {\n      try {\n        const layer = await getLayer({\n          authentication: new UserSession(accounts[active]),\n          url: config[config.env].featureServiceURL,\n        });\n        if (layer && layer.fields) {\n          setHasAccess(true);\n        }\n      } catch (error) {\n        console.error(error);\n        setHasAccess(false);\n      }\n    };\n    if (active && accounts[active] && accounts[active].session) {\n      testAccess();\n    }\n  }, [accounts, active, config]);\n\n  const attemptLogin = () => {\n    addAccount(loginOptions);\n  };\n  const attemptLogout = () => {\n    logoutAccount(accounts[active]);\n  };\n\n  if (\n    active &&\n    accounts[active] &&\n    accounts[active].session &&\n    hasAccess !== null\n  ) {\n    if (hasAccess) {\n      return (\n        <AppSecured\n          appConfig={config}\n          account={accounts[active]}\n          userSession={new UserSession(accounts[active].session)}\n          attemptLogout={attemptLogout}\n        />\n      );\n    } else {\n      logoutAccount(accounts[active]);\n      return <Login attemptLogin={attemptLogin} />;\n    }\n  } else {\n    return <Login attemptLogin={attemptLogin} />;\n  }\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./components/App\";\nimport reportWebVitals from \"./reportWebVitals\";\n// style\nimport \"./index.css\";\nimport CalciteThemeProvider, {\n  CalciteTheme,\n} from \"calcite-react/CalciteThemeProvider\";\nimport config from \"./config/config.json\";\n\nlet theme = CalciteTheme;\n\ntheme.palette.Brand_Blue_200 = \"#1f2574\";\ntheme.palette.blue = \"#1f2574\";\ntheme.palette.lightBlue = \"#5258A7\";\ntheme.palette.darkBlue = \"#5258A7\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <CalciteThemeProvider>\n      <App config={config} />\n    </CalciteThemeProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}